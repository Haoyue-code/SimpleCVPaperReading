---
title: MOT技术路线
date: 2019-10-18 14:54:46
tags: 
- MOT
- 技术路线

categories:
- 深度学习
---

1. 数据集收集，数据集主要来源是宁夏项目中来自肉牛养殖场的视频，视频质量参差不齐，存在夜间光线过弱，光照过于强烈，遮挡过于严重，视频模糊等情况，需要进行初步筛选，并从中提取关键帧作为数据集。
    1. 挑选满足要求的视频，光照适宜，没有明显视频模糊
    2. 处理视频，提取关键帧，要求清晰，帧与帧之间重复较小，具有代表性
    3. 处理关键帧，将关键帧图像分辨率统一到1240*720, 剔除不合要求关键帧并且每隔几张取一张关键帧作为最终数据集中的图片
2. 数据集构造，我们采用detection-based-tracking方法进行多目标检测，所以目标检测是基础，拟采用的deep sort方法是基于yolov3进行检测的，所以需要训练高效检测器，才能为多目标检测服务。
    1. 处理挑选的关键帧，进行模糊检测，对清晰度不合要求的图片删除
    2. 使用labelimg软件进行标注，制定了标注的标准：
        1. 不止标注完整牛，牛身体的一部分也进行标注，不能只标注图像中完整的目标，被遮挡的目标，只要人眼能看清是啥的都应该被标注，并且矩形框只需要包含看得见的部分即可
        2. 遮挡不超过50%，远处目标如果人眼无法识别，那就先不要标注
        3. 标注方框大小合适，矩形方框应该刚好将目标包围住，之间的间隙不能太大，也不能太小，防止出现抖动
        4. 一张图片素材中，近处的大目标需要标注，远处人眼看得清的小目标同样需要标注
    3. 完成标注后进行审核，确保标注质量
    4. 着手构建标准数据集如 VOC2007, MS COCO等， 按照官方要求进行构造，完成后进行复查，确保数据集完整性和正确性。
3. 训练YOLOv3，设计新型网络模型进行目标检测训练，尽可能提升检测器的表现。
    1. 配置深度学习服务器，如CUDA, cuDnn加速环境，以及深度学习环境，如pytorch, keras , tensorflow等。
    2. 进行服务器环境配置，配置好环境变量，保证命令行下正常运行。
    3. 使用官方提供的darknet模型进行训练，对原始模型（即yolov3）进行训练，查看模型提升效果，测试其他网络模型，比如轻量级网络Tiny YOLOv3等。
    4. 借鉴轻量级模型设计原则，比如YOLO Nano, MobileNet, DenseNet等模型进行模型的设计，尽可能在减少模型参数的情况下提高模型检测的准确率。
    5. 训练模型，综合比对，得到最优模型，作为下一步目标跟踪的基础。
4. 多目标跟踪不仅是用到了YOLOv3进行目标检测，还有一部分负责重识别，deep association metric在原始论文中是一个行人重识别网络，可以作为牛的多目标跟踪进行重识别，但是效果相对会差一点，所以下一步目标是构建牛的重识别矩阵，结合外观模型进行进一步对较长时间遮挡情况下进行优化。
5. 目前采用的方法是基于online的方法，实时检测效果比较好，但是没有结合上下文信息（前后几帧），可能会出现ID switch的情况，所以之后会继续追随最新的研究方向，结合更多信息，让多目标追踪效果更佳突出。